{"ast":null,"code":"import { Loader } from './Loader.js';\nimport errorHandler from '../errorHandler.js';\nimport check from './SupportThreeCheck.js';\nimport { canvasHeight } from '../bus.js';\nimport { canvasWidht } from '../bus.js';\nexport let camera;\nlet controls, scene, renderer, light;\nexport default class {\n  constructor(THREE, color, OrbitControl, autoRotate, cameraPosition = false) {\n    const ans = this.supportAndCnvsSize();\n    const canvas = ans.canvas;\n    let height = ans.height;\n    let width = ans.width;\n\n    try {\n      this.init(THREE, canvas, color, width, height, cameraPosition);\n      this.addToScene(THREE);\n\n      if (OrbitControl !== false) {\n        this.setControls(OrbitControl, canvas);\n\n        if (autoRotate) {\n          controls.autoRotate = autoRotate;\n          controls.autoRotateSpeed = 2;\n        }\n\n        animate();\n      } else if (OrbitControl == false) {\n        if (cameraPosition !== false) {\n          console.error('biba');\n          camera.position.x = cameraPosition.x;\n          camera.position.y = cameraPosition.y;\n          camera.position.z = cameraPosition.z;\n        }\n\n        renderer.render(scene, camera);\n      }\n    } catch (e) {\n      errorHandler(\"Rendering\", \"constructor\", e, \"canvas\");\n    }\n  }\n\n  supportAndCnvsSize() {\n    try {\n      const canvas = document.querySelector(\"#canvas\");\n      canvas.width = canvasWidht();\n      canvas.height = canvasHeight();\n      const checking = check(canvas);\n\n      if (checking.status == false) {\n        errorHandler('threeLogic', 'checking', checking.ext, 'canvas');\n      } else {\n        return {\n          canvas: canvas,\n          width: canvas.width,\n          height: canvas.height\n        };\n      }\n    } catch (e) {\n      errorHandler(\"Rendering\", \"supportAndCnvsSize_1\", e, \"canvas\");\n    }\n\n    return false;\n  }\n\n  init(THREE, canvas, color, width, height, cameraPosition) {\n    try {\n      renderer = this.Renderer(canvas, THREE);\n      scene = this.Scene(THREE, color);\n      camera = this.Camera(width, height, THREE, cameraPosition);\n      light = this.Light(THREE);\n    } catch (e) {\n      errorHandler('Rendering', 'init', e, 'canvas');\n    }\n  }\n\n  setControls(OrbitControl, canvas) {\n    controls = new OrbitControl(camera, canvas);\n    controls.target.set(0, 0, 0);\n    controls.update();\n  }\n\n  addToScene(THREE) {\n    try {\n      scene.add(Loader(THREE));\n      scene.add(light);\n    } catch (e) {\n      errorHandler('Rendering', 'addToScene', e, 'canvas');\n    }\n  }\n\n  Light(THREE) {\n    try {\n      let light = new THREE.AmbientLight(0xffffff);\n      return light;\n    } catch (e) {\n      errorHandler('Rendering', 'Light', e, 'canvas');\n    }\n  }\n\n  Camera(width, height, THREE, cameraPosition) {\n    try {\n      let camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 3000);\n\n      if (cameraPosition == false) {\n        camera.position.set(0, 0, 1000);\n      } else {\n        camera.position.set(cameraPosition.x, cameraPosition.y, cameraPosition.z);\n        console.log(cameraPosition);\n      }\n\n      return camera;\n    } catch (e) {\n      errorHandler('Rendering', 'Camera', e, 'canvas');\n    }\n  }\n\n  Scene(THREE, color) {\n    try {\n      const scene = new THREE.Scene();\n      scene.background = new THREE.Color(color);\n      return scene;\n    } catch (e) {\n      errorHandler('Rendering', 'Scene', e, 'canvas');\n    }\n  }\n\n  Renderer(canvas, THREE) {\n    try {\n      const rend = new THREE.WebGLRenderer({\n        canvas\n      });\n      return rend;\n    } catch (e) {\n      errorHandler('Rendering', 'Renderer', e, 'canvas');\n    }\n  }\n\n}\n\nfunction animate() {\n  try {\n    controls.update();\n    render();\n    requestAnimationFrame(animate);\n  } catch (e) {\n    errorHandler('Rendering', 'animate', e, 'camvas');\n  }\n}\n\nfunction render() {\n  renderer.render(scene, camera);\n}","map":{"version":3,"sources":["/home/neuromancer/projects/YodaTeam/frontend/geetech/src/components/Blocks/scripts/Three/Renderering.js"],"names":["Loader","errorHandler","check","canvasHeight","canvasWidht","camera","controls","scene","renderer","light","constructor","THREE","color","OrbitControl","autoRotate","cameraPosition","ans","supportAndCnvsSize","canvas","height","width","init","addToScene","setControls","autoRotateSpeed","animate","console","error","position","x","y","z","render","e","document","querySelector","checking","status","ext","Renderer","Scene","Camera","Light","target","set","update","add","AmbientLight","PerspectiveCamera","log","background","Color","rend","WebGLRenderer","requestAnimationFrame"],"mappings":"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","sourcesContent":["import { Loader } from './Loader.js';\nimport errorHandler from '../errorHandler.js'\nimport check from './SupportThreeCheck.js'\nimport { canvasHeight } from '../bus.js';\nimport { canvasWidht } from '../bus.js';\nexport let camera\nlet controls, scene, renderer, light;\n\n\nexport default class{\n    constructor(THREE, color, OrbitControl, autoRotate, cameraPosition=false) {\n        const ans = this.supportAndCnvsSize();\n        const canvas = ans.canvas;\n        let height = ans.height;\n        let width = ans.width;\n        try{\n            this.init(THREE, canvas, color, width, height, cameraPosition);\n            this.addToScene(THREE);\n            if(OrbitControl!== false){\n                this.setControls(OrbitControl, canvas)\n                if(autoRotate){\n                    controls.autoRotate = autoRotate\n                    controls.autoRotateSpeed = 2;\n                }\n                animate()\n            }\n            else if(OrbitControl == false){\n                if(cameraPosition !== false){\n                    console.error('biba')\n                    camera.position.x = cameraPosition.x;\n                    camera.position.y = cameraPosition.y;\n                    camera.position.z = cameraPosition.z;\n                }\n                renderer.render(scene, camera);\n            }\n        }\n        catch(e){\n            errorHandler(\"Rendering\", \"constructor\", e, \"canvas\")\n        }\n    }\n\n    supportAndCnvsSize(){\n        try{\n            const canvas = document.querySelector(\"#canvas\");\n            canvas.width = canvasWidht();\n            canvas.height = canvasHeight();\n            const checking = check(canvas);\n            if(checking.status == false){\n                errorHandler('threeLogic', 'checking', checking.ext, 'canvas');\n            }\n            else{   \n                return {canvas: canvas, width: canvas.width, height: canvas.height}\n            }\n        }\n        catch(e){\n            errorHandler(\"Rendering\", \"supportAndCnvsSize_1\", e, \"canvas\");\n        }\n        return false;\n    }\n    init(THREE, canvas, color, width, height, cameraPosition){\n        try{\n            renderer = this.Renderer(canvas, THREE);\n            scene = this.Scene(THREE, color);\n            camera = this.Camera(width, height, THREE, cameraPosition);\n            light = this.Light(THREE);\n        }\n        catch(e){\n            errorHandler('Rendering', 'init', e, 'canvas')\n        }\n    }\n\n    setControls(OrbitControl, canvas){\n        controls = new OrbitControl(camera, canvas)\n        controls.target.set(0, 0, 0);\n        controls.update();\n    }\n    addToScene(THREE){\n        try{\n            scene.add(Loader(THREE))\n            scene.add(light)\n        }\n        catch(e){\n            errorHandler('Rendering', 'addToScene', e, 'canvas')\n        }\n    }\n\n    Light(THREE){\n        try{\n            let light = new THREE.AmbientLight(0xffffff);\n            return light;\n        }\n        catch(e){\n            errorHandler('Rendering', 'Light', e, 'canvas');\n        }\n    }\n    Camera(width, height, THREE, cameraPosition){\n        try{\n            let camera = new THREE.PerspectiveCamera(45, width/height, 0.1, 3000);\n            if(cameraPosition==false){\n                camera.position.set(0, 0, 1000);\n            }\n            else{\n                camera.position.set(cameraPosition.x, cameraPosition.y, cameraPosition.z);\n                console.log(cameraPosition)\n            }\n            return camera;\n        }\n        catch(e){\n            errorHandler('Rendering', 'Camera', e, 'canvas');\n        }\n    }\n    Scene(THREE, color){\n        try{\n            const scene = new THREE.Scene;\n            scene.background = new THREE.Color(color);\n            return scene;\n        }\n        catch(e){\n            errorHandler('Rendering', 'Scene', e, 'canvas');\n        }\n    }\n    Renderer(canvas, THREE){\n        try{\n            const rend =  new THREE.WebGLRenderer({canvas});\n            return rend;\n        }\n        catch(e){\n            errorHandler('Rendering', 'Renderer', e, 'canvas');\n        }\n    }\n}\n\nfunction animate(){\n    try{\n        controls.update();\n        render();\n        requestAnimationFrame( animate );\n    }\n    catch(e){\n        errorHandler('Rendering', 'animate', e, 'camvas')\n    }\n}\nfunction render(){\n    renderer.render(scene, camera)\n}"]},"metadata":{},"sourceType":"module"}